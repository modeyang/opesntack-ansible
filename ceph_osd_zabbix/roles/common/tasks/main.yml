---
# This playbook contains common plays that will be run on all nodes.

- name: Configure zabbix_confige file
  copy: src=zabbix_agentd.conf dest=/etc/zabbix/zabbix_agentd.conf
  tags: zabbix_agent
  notify: restart zabbix_agent

- name: Copy ceph-status.sh file
  copy: src=ceph-status.sh dest=/opt/ceph-status.sh
  tags: zabbix_agent

- name: chmod +x ceph-status.sh file
  shell: chmod +x /opt/ceph-status.sh
  tags: zabbix_agent

- name: Start the zabbix-agent service
  service: name=zabbix-agent state=restarted enabled=yes
  tags: zabbix_agent


- name: apt install bc
  apt: pkg=bc state=installed update_cache=true
  tags: zabbix_agent
